{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orders detail #{{ order.id }} - Sushi em Casa</title>
    
    <link rel="stylesheet" href="{% static 'sushiemcasa/css/homepage_style.css' %}">
    <link rel="stylesheet" href="{% static 'sushiemcasa/css/pedidos_style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'sushiemcasa/images/LOGO.ico' %}">
</head>
<body>

    <header class="barra-navegacao">
        <div class="logo">
             <a href="{% url 'sushiemcasa:cardapio' %}"> 
                <img src="{% static 'sushiemcasa/images/LOGO.jpg' %}" alt="Logo Sushi em Casa">
            </a>
        </div>
        <nav>
            <ul>
                <li><a href="{% url 'sushiemcasa:cardapio' %}">Home</a></li>
                <li><a href="{% url 'sushiemcasa:basket' %}">Basket</a></li>
                <li><a href="{% url 'sushiemcasa:orders' %}" class="ativo">Orders</a></li>
                <li><a href="{% url 'sushiemcasa:contato' %}">Contact</a></li>
            </ul>
        </nav>
        <div class="icone-usuario">
            <a href="#">
                <i class="fas fa-user-circle"></i>
            </a>
        </div>
    </header>

    <main class="container-pedidos">
        <h1>Order Detail #{{ order.id }}</h1>
        <div class="pedido">
            <div class="pedido-header">
                <h2>Order #{{ order.id }}</h2>
                <span class="pedido-status status-{{ order.status|slugify }}">{{ order.get_status_display }}</span>
            </div>
            <p><strong>Costumer:</strong> {{ order.user.username }}</p>
            <p><strong>Order date:</strong> {{ order.created_at|date:"d/m/Y H:i" }}</p>
            {% if order.delivery_datetime %}
                <p><strong>Scheduled delivery for:</strong> {{ order.delivery_datetime|date:"d/m/Y H:i" }}</p>
            {% else %}
                <p><strong>Delivery:</strong> ASAP</p>
            {% endif %}
            <h4>Itens:</h4>
            <ul class="items-list">
                {% for item in order.items.all %}
                    <li class="item-pedido">
                        {{ item.quantity }}x {{ item.item_name }} - R$ {{ item.price|floatformat:2 }}
                    </li>
                {% empty %}
                    <li>None itens found in this order.</li>
                {% endfor %}
            </ul>
            <hr>
            <p><strong>Total: $ {{ order.total_price|floatformat:2 }}</strong></p>
        </div>

        {% if order.status != 'Cancelado' %}
            <div class="stepper-wrapper">
                <div class="stepper-item {% if order.status == 'Pendente' or order.status == 'Em preparo' or order.status == 'A caminho' or order.status == 'Entregue' %}completed{% endif %}">
                    <div class="step-counter"><i class="fas fa-check"></i></div>
                    <div class="step-name">Order Accepted</div>
                </div>
                <div class="stepper-item {% if order.status == 'Em preparo' or order.status == 'A caminho' or order.status == 'Entregue' %}completed{% endif %}">
                    <div class="step-counter"><i class="fas fa-utensils"></i></div>
                    <div class="step-name">In preparation</div>
                </div>
                <div class="stepper-item {% if order.status == 'A caminho' or order.status == 'Entregue' %}completed{% endif %}">
                    <div class="step-counter"><i class="fas fa-truck"></i></div>
                    <div class="step-name">On the way</div>
                </div>
                <div class="stepper-item {% if order.status == 'Entregue' %}completed entregue{% endif %}">
                    <div class="step-counter"><i class="fas fa-box-open"></i></div>
                    <div class="step-name">Delivered</div>
                </div>
            </div>
        {% endif %}

        <p style="text-align: center; margin-top: 20px;">
            <a href="{% url 'sushiemcasa:orders' %}" class="btn btn-secondary">Voltar para Meus Pedidos</a>
        </p>
    </main>

    <a href="https://wa.me/12397719811?text=Oi%20tudo%20bem" class="whatsapp-float" target="_blank">
        <img src="{% static 'sushiemcasa/images/whatsapp.png' %}" alt="whatsapp">
    </a>

    <footer class="rodape">
        <div class="logo">
            <img src="{% static 'sushiemcasa/images/LOGO.jpg' %}" alt="Logo Sushi em Casa"> 
        </div>
        <div class="links-rodape">
            <h4>Navegação</h4>
            <ul>
                <li><a href="{% url 'sushiemcasa:cardapio' %}">Home</a></li>
                <li><a href="{% url 'sushiemcasa:basket' %}">Basket</a></li>
                <li><a href="{% url 'sushiemcasa:contato' %}">Contact</a></li>
                <li><a href="{% url 'sushiemcasa:orders' %}" class="ativo">Orders</a></li> 
            </ul>
        </div>
        <div class="contato-rodape">
            <h4>Contact</h4>
            <p>770 E Ashland St Apt 1009, Brockton, MA 02302</p>
            <p>+1(239)7719811</p>
        </div>
    </footer>

</body>
</html>