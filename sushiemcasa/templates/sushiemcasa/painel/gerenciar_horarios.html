{% extends 'sushiemcasa/base.html' %}
{% load static %}

{% block title %}Gerenciar Horários{% endblock %}

{% block extra_css %}
<style>
    /* Estilo para a tabela de horários */
    .schedule-table {
        width: 100%; 
        border-collapse: collapse;
        margin-top: 20px;
    }
    .schedule-table th, .schedule-table td {
        padding: 12px;
        border-bottom: 1px solid #eee;
        text-align: left;
    }
    .schedule-table th {
        background-color: #f9f9f9;
    }
    .schedule-table td:nth-child(1) {
        font-weight: bold;
    }
    /* Ajusta o tamanho dos inputs */
    .schedule-table input[type="time"] {
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    .schedule-table input[type="checkbox"] {
        transform: scale(1.3);
    }
</style>
{% endblock %}

{% block content %}
<main class="container-carrinho" style="max-width: 900px; margin: 40px auto;">
    <h1>Gerenciar Horários de Funcionamento</h1>
    <a href="{% url 'sushiemcasa:painel_controle' %}">&larr; Voltar ao Painel</a>
    <hr>
    
    {% if messages %}
        {% for message in messages %}
            <div class.alert 
                 style="padding: 15px; margin-bottom: 20px; border-radius: 5px; color: white; background-color: {% if message.tags == 'success' %}#28a745{% else %}#dc3545{% endif %};">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <form method="post">
        {% csrf_token %}
        {{ formset.management_form }} 

        <table class="schedule-table">
            <thead>
                <tr>
                    <th>Dia</th>
                    <th>Aberto?</th>
                    <th>Abre às</th>
                    <th>Fecha às</th>
                </tr>
            </thead>
            <tbody>
                {% for form in formset %}
                <tr>
                    <td>
                        <strong>{{ form.instance.get_day_of_week_display }}</strong>
                        
                        {% if form.non_field_errors %}<div class="errorlist" style="color: red;">{{ form.non_field_errors }}</div>{% endif %}
                        {% if form.id %}{{ form.id }}{% endif %}
                    </td>
                    <td>{{ form.is_open }}</td>
                    <td>{{ form.open_time }}</td>
                    <td>{{ form.close_time }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        
        <br>
        <button type="submit" class="btn-checkout">Salvar Horários</button>
    </form>
</main>
{% endblock %}